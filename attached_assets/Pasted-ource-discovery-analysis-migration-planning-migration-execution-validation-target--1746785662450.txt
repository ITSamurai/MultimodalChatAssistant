ource -> discovery -> analysis -> migration_planning -> migration_execution -> validation -> target

Error converting D2 to SVG - not creating fallback
Error generating diagram: Error: Failed to convert D2 to SVG: Command failed: node "/home/runner/workspace/server/services/d2-wrapper.js" "/home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2" "/home/runner/workspace/uploads/svg/diagram__draw_a_diagram_of_the____1746785628129.svg" --theme=0 --layout=dagre --pad=20
err: failed to compile uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2: /home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2:10:3: invalid style keyword: "style"
D2 execution failed: Command failed: "/nix/store/yzym5q8ib2xqp4nr7s7ggk3alsibwg7a-d2-0.6.5/bin/d2" "/home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2" "/home/runner/workspace/uploads/svg/diagram__draw_a_diagram_of_the____1746785628129.svg" --theme=0 --layout=dagre --pad=20
err: failed to compile uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2: /home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2:10:3: invalid style keyword: "style"
Fallback D2 execution failed: Command failed: d2 "/home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2" "/home/runner/workspace/uploads/svg/diagram__draw_a_diagram_of_the____1746785628129.svg" --theme=0 --layout=dagre --pad=20
D2 DIAGRAM ERROR: D2 Failed: Command failed: d2 "/home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2" "/home/runner/workspace/uploads/svg/diagram__draw_a_diagram_of_the____1746785628129.svg" --theme=0 --layout=dagre --pad=20
=== D2 Error Details ===
Input file: /home/runner/workspace/uploads/d2/diagram__draw_a_diagram_of_the____1746785628129.d2
Output file: /home/runner/workspace/uploads/svg/diagram__draw_a_diagram_of_the____1746785628129.svg
Options: --theme=0 --layout=dagre --pad=20
=== D2 Script Content ===
direction: down

layout { rankSep: 120 }

style {
  style.fill: "#f5f5f5"
  style.stroke: "#333333"
  style.stroke-width: 2
  style.font-size: 18
  style.border-radius: 6
}

source: "Source OS" {
  style.fill: "#e6f7ff"
  style.stroke: "#1890ff"
}

discovery: "Discovery" {
  style.fill: "#fff7e6"
  style.stroke: "#faad14"
}

analysis: "Analysis" {
  style.fill: "#fffbe6"
  style.stroke: "#ffc53d"
}

migration_planning: "Migration Planning" {
  style.fill: "#f9f0ff"
  style.stroke: "#722ed1"
}

migration_execution: "Migration Execution" {
  style.fill: "#f0f5ff"
  style.stroke: "#2f54eb"
}

validation: "Validation" {
  style.fill: "#e6fffb"
  style.stroke: "#13c2c2"
}

target: "Target OS" {
  style.fill: "#f6ffed"
  style.stroke: "#52c41a"
}

source -> discovery -> analysis -> migration_planning -> migration_execution -> validation -> target

    at d2ToSvg (/home/runner/workspace/server/services/d2.service.ts:152:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async generateDiagram (/home/runner/workspace/server/services/diagram-generation.service.ts:500:24)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:368:33)
Error generating diagram: Error: Failed to generate diagram
    at generateDiagram (/home/runner/workspace/server/services/diagram-generation.service.ts:532:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:368:33)
Using model: gpt-4o temp: 0.7 max_tokens: 2048
Successfully generated response from knowledge base