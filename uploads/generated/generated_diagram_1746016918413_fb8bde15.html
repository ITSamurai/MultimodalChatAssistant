<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RiverMeadow Diagram</title>
  <script src="https://cdn.jsdelivr.net/npm/mxgraph/javascript/mxClient.js"></script>
  <script src="https://app.diagrams.net/js/viewer.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .diagram-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      max-width: 100%;
      margin: 0 auto;
      overflow: hidden;
      position: relative;
    }
    .drawio-viewer {
      width: 100%;
      height: 600px;
      border: none;
    }
    h1 {
      text-align: center;
      color: #0078d4;
      margin-bottom: 20px;
    }
    .fallback-message {
      padding: 20px;
      color: #d32f2f;
      text-align: center;
      display: none;
    }
  </style>
</head>
<body>
  <div class="diagram-container">
    <h1>RiverMeadow Migration Diagram</h1>
    <div class="drawio-container">
      <iframe class="drawio-viewer" src="https://app.diagrams.net/?embed=1&ui=min&spin=1&proto=json" frameborder="0" allowfullscreen></iframe>
    </div>
    <div class="fallback-message">
      Unable to load diagram. Please download and open in <a href="https://app.diagrams.net/" target="_blank">diagrams.net</a>
    </div>
  </div>
  <script>
    // Initialize the viewer
    const viewer = document.querySelector('.drawio-viewer');
    
    // Load the diagram XML once the iframe is loaded
    viewer.onload = function() {
      try {
        const xmlData = `<mxfile host="app.diagrams.net">
  <diagram name="OS-based Migration Flowchart" id="flowchart1">
    <mxGraphModel dx="1044" dy="593" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="start" value="Start" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="40" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="deploy" value="Deploy RMS Migration Appliance" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="secureNetwork" value="Secure Network" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="communicate" value="Communicate with RiverMeadow Platform" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="40" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="migrate" value="Migrate" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="180" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="viewMigrations" value="View Migrations" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="180" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="migrationSummary" value="Migration Summary" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="180" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="end" value="End" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="800" y="180" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" source="start" target="deploy" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" edge="1" source="deploy" target="secureNetwork" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" edge="1" source="secureNetwork" target="communicate" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4" edge="1" source="communicate" target="migrate" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5" edge="1" source="migrate" target="viewMigrations" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e6" edge="1" source="viewMigrations" target="migrationSummary" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" edge="1" source="migrationSummary" target="end" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>`;
        viewer.contentWindow.postMessage(JSON.stringify({
          action: 'load',
          xml: xmlData
        }), '*');
      } catch (e) {
        console.error('Error loading diagram:', e);
        document.querySelector('.fallback-message').style.display = 'block';
      }
    };
  </script>
</body>
</html>